"use strict";exports.id=252,exports.ids=[252],exports.modules={7629:(a,b,c)=>{c.d(b,{p:()=>g});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,type:b,...c},e)=>(0,d.jsx)("input",{type:b,className:(0,f.cn)("flex h-10 w-full rounded-lg border border-input bg-muted/30 px-3 py-2 text-sm outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring/90 disabled:cursor-not-allowed disabled:opacity-50",a),ref:e,...c}));g.displayName="Input"},15514:(a,b,c)=>{c.d(b,{cn:()=>f});var d=c(43249),e=c(58829);function f(...a){return(0,e.QP)((0,d.$)(a))}},19217:(a,b,c)=>{c.d(b,{$:()=>j});var d=c(21124),e=c(38301),f=c(96425),g=c(26691),h=c(15514);let i=(0,g.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg border border-transparent text-sm font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-[0_10px_20px_-14px_hsl(var(--primary))] hover:brightness-110",secondary:"border-border/70 bg-muted/70 text-foreground hover:bg-muted",outline:"border-border/80 bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"text-foreground/85 hover:bg-accent hover:text-accent-foreground",destructive:"bg-red-600 text-white hover:bg-red-500"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-lg px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),j=e.forwardRef(({className:a,variant:b,size:c,asChild:e=!1,...g},j)=>{let k=e?f.DX:"button";return(0,d.jsx)(k,{className:(0,h.cn)(i({variant:b,size:c,className:a})),ref:j,...g})});j.displayName="Button"},22544:(a,b,c)=>{c.d(b,{E:()=>h});var d=c(21124);c(38301);var e=c(26691),f=c(15514);let g=(0,e.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-muted text-muted-foreground",danger:"border-transparent bg-red-600 text-white"}},defaultVariants:{variant:"default"}});function h({className:a,variant:b,...c}){return(0,d.jsx)("div",{className:(0,f.cn)(g({variant:b}),a),...c})}},28241:(a,b,c)=>{c.d(b,{bq:()=>l,eb:()=>n,gC:()=>m,l6:()=>j,yv:()=>k});var d=c(21124),e=c(38301),f=c(38658),g=c(85351),h=c(71613),i=c(15514);let j=f.bL,k=f.WT,l=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.l9,{ref:e,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-lg border border-input bg-muted/30 px-3 py-2 text-sm outline-none ring-offset-background focus-visible:ring-2 focus-visible:ring-ring/90",a),...c,children:[b,(0,d.jsx)(f.In,{children:(0,d.jsx)(g.A,{className:"h-4 w-4 opacity-60"})})]}));l.displayName=f.l9.displayName;let m=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsx)(f.ZL,{children:(0,d.jsx)(f.UC,{ref:e,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-lg border border-border/80 bg-card/95 p-1 shadow-[0_18px_30px_-18px_hsl(220_30%_1%_/_0.95)]",a),...c,children:(0,d.jsx)(f.LM,{children:b})})}));m.displayName=f.UC.displayName;let n=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(f.q7,{ref:e,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-md py-1.5 pl-8 pr-2 text-sm outline-none hover:bg-accent",a),...c,children:[(0,d.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,d.jsx)(f.VF,{children:(0,d.jsx)(h.A,{className:"h-4 w-4"})})}),(0,d.jsx)(f.p4,{children:b})]}));n.displayName=f.q7.displayName},31823:(a,b,c)=>{c.d(b,{O:()=>D});var d=c(21124),e=c(38301),f=c(42378),g=c(8849),h=c(85708);let i=(0,h.createServerReference)("4014c53abf1dd202fe829c7cd41e8361f122e2a43b",h.callServer,void 0,h.findSourceMapURL,"updateWorkItem");var j=c(58574),k=c(56618),l=c(19217),m=c(24328),n=c(47089),o=c(15514);let p=m.bL,q=m.l9,r=m.ZL,s=m.bm,t=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(m.hJ,{ref:c,className:(0,o.cn)("fixed inset-0 z-50 bg-black/70",a),...b}));t.displayName=m.hJ.displayName;let u=e.forwardRef(({className:a,children:b,...c},e)=>(0,d.jsxs)(r,{children:[(0,d.jsx)(t,{}),(0,d.jsxs)(m.UC,{ref:e,className:(0,o.cn)("fixed left-1/2 top-1/2 z-50 w-[95vw] max-w-xl -translate-x-1/2 -translate-y-1/2 rounded-lg border border-border bg-background p-6 shadow-lg",a),...c,children:[b,(0,d.jsx)(s,{className:"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100",children:(0,d.jsx)(n.A,{className:"h-4 w-4"})})]})]}));function v({className:a,...b}){return(0,d.jsx)("div",{className:(0,o.cn)("mb-4 space-y-1.5",a),...b})}u.displayName=m.UC.displayName;let w=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(m.hE,{ref:c,className:(0,o.cn)("text-lg font-semibold",a),...b}));w.displayName=m.hE.displayName;let x=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(m.VY,{ref:c,className:(0,o.cn)("text-sm text-muted-foreground",a),...b}));x.displayName=m.VY.displayName;var y=c(7629),z=c(28241),A=c(62926),B=c(33847),C=c(80230);function D({item:a,types:b,series:c}){let h=(0,f.useRouter)(),[m,n]=(0,e.useState)(!1),[o,r]=(0,e.useTransition)(),[s,t]=(0,e.useState)(a.work.title),[D,E]=(0,e.useState)(a.type_id),[F,G]=(0,e.useState)(a.series_id??"none"),[H,I]=(0,e.useState)(a.status),[J,K]=(0,e.useState)(a.rating??0),[L,M]=(0,e.useState)(a.work.thumbnail_url??""),[N,O]=(0,e.useState)(a.why_interested??""),[P,Q]=(0,e.useState)(a.review_text??""),[R,S]=(0,e.useState)(a.availability_end??""),[T,U]=(0,e.useState)(a.tags.join(",")),[V,W]=(0,e.useState)(""),[X,Y]=(0,e.useState)("");return(0,d.jsxs)(p,{open:m,onOpenChange:n,children:[(0,d.jsx)(q,{asChild:!0,children:(0,d.jsx)(l.$,{size:"sm",variant:"secondary",children:"編集"})}),(0,d.jsxs)(u,{className:"max-h-[90vh] overflow-y-auto",children:[(0,d.jsxs)(v,{children:[(0,d.jsx)(w,{children:"作品を編集"}),(0,d.jsx)(x,{children:"タイトル・ステータス・評価などを更新します。"})]}),(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsx)(y.p,{value:s,onChange:a=>t(a.target.value),placeholder:"タイトル"}),(0,d.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)(z.l6,{value:D,onValueChange:E,children:[(0,d.jsx)(z.bq,{children:(0,d.jsx)(z.yv,{})}),(0,d.jsx)(z.gC,{children:b.map(a=>(0,d.jsx)(z.eb,{value:a.id,children:a.name},a.id))})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(y.p,{value:V,onChange:a=>W(a.target.value),placeholder:"新しい種別"}),(0,d.jsx)(l.$,{variant:"outline",onClick:()=>{V.trim()&&r(async()=>{await (0,j.r)(V),W(""),h.refresh()})},disabled:o,children:(0,d.jsx)(g.A,{className:"h-4 w-4"})})]})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)(z.l6,{value:F,onValueChange:G,children:[(0,d.jsx)(z.bq,{children:(0,d.jsx)(z.yv,{})}),(0,d.jsxs)(z.gC,{children:[(0,d.jsx)(z.eb,{value:"none",children:"シリーズなし"}),c.map(a=>(0,d.jsx)(z.eb,{value:a.id,children:a.name},a.id))]})]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(y.p,{value:X,onChange:a=>Y(a.target.value),placeholder:"新しいシリーズ"}),(0,d.jsx)(l.$,{variant:"outline",onClick:()=>{X.trim()&&r(async()=>{await (0,k.w)(X),Y(""),h.refresh()})},disabled:o,children:(0,d.jsx)(g.A,{className:"h-4 w-4"})})]})]})]}),(0,d.jsxs)(z.l6,{value:H,onValueChange:a=>I(a),children:[(0,d.jsx)(z.bq,{children:(0,d.jsx)(z.yv,{})}),(0,d.jsx)(z.gC,{children:Object.entries(C.Zt).map(([a,b])=>(0,d.jsx)(z.eb,{value:a,children:b},a))})]}),(0,d.jsxs)("div",{className:"space-y-2",children:[(0,d.jsxs)("div",{className:"text-xs text-muted-foreground",children:["評価: ",J.toFixed(1)]}),(0,d.jsx)(A.A,{min:0,max:5,step:.1,value:[J],onValueChange:a=>K(a[0]??0)})]}),(0,d.jsx)(y.p,{value:L,onChange:a=>M(a.target.value),placeholder:"サムネイルURL"}),(0,d.jsx)(y.p,{value:R,type:"date",onChange:a=>S(a.target.value)}),(0,d.jsx)(B.T,{value:N,onChange:a=>O(a.target.value),placeholder:"気になった理由"}),(0,d.jsx)(B.T,{value:P,onChange:a=>Q(a.target.value),placeholder:"感想"}),(0,d.jsx)(y.p,{value:T,onChange:a=>U(a.target.value),placeholder:"タグ (カンマ区切り)"}),(0,d.jsx)(l.$,{className:"w-full",onClick:()=>{r(async()=>{await i({id:a.id,title:s,type_id:D,series_id:"none"===F?null:F,status:H,rating:J,review_text:P||null,why_interested:N||null,availability_end:R||null,thumbnail_url:L||null,tags:T.split(",").map(a=>a.trim()).filter(Boolean)}),n(!1),h.refresh()})},disabled:o,children:"保存"})]})]})]})}},33847:(a,b,c)=>{c.d(b,{T:()=>g});var d=c(21124),e=c(38301),f=c(15514);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,f.cn)("min-h-[80px] w-full rounded-lg border border-input bg-muted/30 px-3 py-2 text-sm outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring/90 disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...b}));g.displayName="Textarea"},45119:(a,b,c)=>{c.d(b,{Wu:()=>i,ZB:()=>h,Zp:()=>f,aR:()=>g});var d=c(21124);c(38301);var e=c(15514);function f({className:a,...b}){return(0,d.jsx)("div",{className:(0,e.cn)("rounded-xl border border-border/85 bg-card/95 text-card-foreground shadow-[0_14px_30px_-20px_hsl(220_30%_1%_/_0.9)] transition-colors",a),...b})}function g({className:a,...b}){return(0,d.jsx)("div",{className:(0,e.cn)("flex flex-col space-y-1.5 p-4",a),...b})}function h({className:a,...b}){return(0,d.jsx)("h3",{className:(0,e.cn)("text-base font-semibold",a),...b})}function i({className:a,...b}){return(0,d.jsx)("div",{className:(0,e.cn)("p-4 pt-0",a),...b})}},56618:(a,b,c)=>{c.d(b,{w:()=>e});var d=c(85708);let e=(0,d.createServerReference)("4025e5480231b04ea434de5c8f0aca107fee1c2e3b",d.callServer,void 0,d.findSourceMapURL,"createSeries")},58574:(a,b,c)=>{c.d(b,{r:()=>e});var d=c(85708);let e=(0,d.createServerReference)("40b10458f459258132b12ff6dbefb1bf035c4fcc6b",d.callServer,void 0,d.findSourceMapURL,"createType")},62926:(a,b,c)=>{c.d(b,{A:()=>h});var d=c(21124),e=c(38301),f=c(27876),g=c(15514);let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsxs)(f.bL,{ref:c,className:(0,g.cn)("relative flex w-full touch-none select-none items-center",a),...b,children:[(0,d.jsx)(f.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-muted",children:(0,d.jsx)(f.Q6,{className:"absolute h-full bg-primary"})}),(0,d.jsx)(f.zi,{className:"block h-4 w-4 rounded-full border border-primary bg-background shadow"})]}));h.displayName=f.bL.displayName},80230:(a,b,c)=>{c.d(b,{Zt:()=>d});let d={planned:"予定",in_progress:"進行中",on_hold:"保留",completed:"完了"}},86577:(a,b,c)=>{c.d(b,{Lp:()=>g,RD:()=>j,WF:()=>l,WI:()=>k,YA:()=>h,iZ:()=>i});var d=c(82161),e=c(4636),f=c(64445);async function g(){let a=await (0,f.U)(),{data:{user:b}}=await a.auth.getUser();return b||(0,d.redirect)("/login"),{supabase:a,user:b}}async function h(a){let b=await (0,f.U)(),[{data:c},{data:d}]=await Promise.all([b.from("content_types").select("id,name").eq("user_id",a).order("name"),b.from("series").select("id,name").eq("user_id",a).order("name")]);return{types:c??[],series:d??[]}}async function i(a,b){let c=(await (0,f.U)()).from("work_items").select("id,user_id,status,rating,review_text,why_interested,availability_end,completed_at,created_at,updated_at,type_id,series_id,tags,work:works(id,title,thumbnail_url),content_type:content_types(id,name),series:series(id,name)").eq("user_id",a);b&&b.length>0&&(c=c.in("status",b));let{data:d,error:e}=await c.order("created_at",{ascending:!0});if(e)throw e;return d??[]}async function j(a){return i(a,[...e.az])}async function k(a){return(await i(a,["completed"])).sort((a,b)=>(b.completed_at??"").localeCompare(a.completed_at??""))}async function l(a){let b=await (0,f.U)(),{data:c,error:d}=await b.from("list_orders").select("work_item_id,position,scope_type,type_id").eq("user_id",a);if(d)throw d;return c??[]}}};