"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[431],{2168:(e,r,a)=>{a.d(r,{Zt:()=>l});let l={planned:"予定",in_progress:"進行中",on_hold:"保留",completed:"完了"}},3209:(e,r,a)=>{a.d(r,{Wu:()=>i,ZB:()=>d,Zp:()=>t,aR:()=>n});var l=a(5155);a(2115);var s=a(5016);function t(e){let{className:r,...a}=e;return(0,l.jsx)("div",{className:(0,s.cn)("rounded-xl border border-border/85 bg-card/95 text-card-foreground shadow-[0_14px_30px_-20px_hsl(220_30%_1%_/_0.9)] transition-colors",r),...a})}function n(e){let{className:r,...a}=e;return(0,l.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 p-4",r),...a})}function d(e){let{className:r,...a}=e;return(0,l.jsx)("h3",{className:(0,s.cn)("text-base font-semibold",r),...a})}function i(e){let{className:r,...a}=e;return(0,l.jsx)("div",{className:(0,s.cn)("p-4 pt-0",r),...a})}},4823:(e,r,a)=>{a.d(r,{r:()=>s});var l=a(926);let s=(0,l.createServerReference)("40b10458f459258132b12ff6dbefb1bf035c4fcc6b",l.callServer,void 0,l.findSourceMapURL,"createType")},5016:(e,r,a)=>{a.d(r,{cn:()=>t});var l=a(2821),s=a(5889);function t(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,s.QP)((0,l.$)(r))}},5195:(e,r,a)=>{a.d(r,{w:()=>s});var l=a(926);let s=(0,l.createServerReference)("4025e5480231b04ea434de5c8f0aca107fee1c2e3b",l.callServer,void 0,l.findSourceMapURL,"createSeries")},5886:(e,r,a)=>{a.d(r,{O:()=>L});var l=a(5155),s=a(2115),t=a(63),n=a(6191),d=a(926);let i=(0,d.createServerReference)("4014c53abf1dd202fe829c7cd41e8361f122e2a43b",d.callServer,void 0,d.findSourceMapURL,"updateWorkItem");var o=a(4823),c=a(5195),u=a(7003),x=a(7539),f=a(5229),h=a(5016);let p=x.bL,m=x.l9,b=x.ZL,v=x.bm,g=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,l.jsx)(x.hJ,{ref:r,className:(0,h.cn)("fixed inset-0 z-50 bg-black/70",a),...s})});g.displayName=x.hJ.displayName;let j=s.forwardRef((e,r)=>{let{className:a,children:s,...t}=e;return(0,l.jsxs)(b,{children:[(0,l.jsx)(g,{}),(0,l.jsxs)(x.UC,{ref:r,className:(0,h.cn)("fixed left-1/2 top-1/2 z-50 w-[95vw] max-w-xl -translate-x-1/2 -translate-y-1/2 rounded-lg border border-border bg-background p-6 shadow-lg",a),...t,children:[s,(0,l.jsx)(v,{className:"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100",children:(0,l.jsx)(f.A,{className:"h-4 w-4"})})]})]})});function y(e){let{className:r,...a}=e;return(0,l.jsx)("div",{className:(0,h.cn)("mb-4 space-y-1.5",r),...a})}j.displayName=x.UC.displayName;let w=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,l.jsx)(x.hE,{ref:r,className:(0,h.cn)("text-lg font-semibold",a),...s})});w.displayName=x.hE.displayName;let N=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,l.jsx)(x.VY,{ref:r,className:(0,h.cn)("text-sm text-muted-foreground",a),...s})});N.displayName=x.VY.displayName;var _=a(6170),C=a(7507),S=a(7060),R=a(7001),k=a(2168);function L(e){var r,a,d,x,f,h;let{item:b,types:v,series:g}=e,L=(0,t.useRouter)(),[V,A]=(0,s.useState)(!1),[U,z]=(0,s.useTransition)(),[T,q]=(0,s.useState)(b.work.title),[Z,$]=(0,s.useState)(b.type_id),[E,F]=(0,s.useState)(null!=(r=b.series_id)?r:"none"),[M,B]=(0,s.useState)(b.status),[I,O]=(0,s.useState)(null!=(a=b.rating)?a:0),[W,J]=(0,s.useState)(null!=(d=b.work.thumbnail_url)?d:""),[Q,Y]=(0,s.useState)(null!=(x=b.why_interested)?x:""),[D,P]=(0,s.useState)(null!=(f=b.review_text)?f:""),[X,G]=(0,s.useState)(null!=(h=b.availability_end)?h:""),[H,K]=(0,s.useState)(b.tags.join(",")),[ee,er]=(0,s.useState)(""),[ea,el]=(0,s.useState)("");return(0,l.jsxs)(p,{open:V,onOpenChange:A,children:[(0,l.jsx)(m,{asChild:!0,children:(0,l.jsx)(u.$,{size:"sm",variant:"secondary",children:"編集"})}),(0,l.jsxs)(j,{className:"max-h-[90vh] overflow-y-auto",children:[(0,l.jsxs)(y,{children:[(0,l.jsx)(w,{children:"作品を編集"}),(0,l.jsx)(N,{children:"タイトル・ステータス・評価などを更新します。"})]}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)(_.p,{value:T,onChange:e=>q(e.target.value),placeholder:"タイトル"}),(0,l.jsxs)("div",{className:"grid gap-2 md:grid-cols-2",children:[(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(C.l6,{value:Z,onValueChange:$,children:[(0,l.jsx)(C.bq,{children:(0,l.jsx)(C.yv,{})}),(0,l.jsx)(C.gC,{children:v.map(e=>(0,l.jsx)(C.eb,{value:e.id,children:e.name},e.id))})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(_.p,{value:ee,onChange:e=>er(e.target.value),placeholder:"新しい種別"}),(0,l.jsx)(u.$,{variant:"outline",onClick:()=>{ee.trim()&&z(async()=>{await (0,o.r)(ee),er(""),L.refresh()})},disabled:U,children:(0,l.jsx)(n.A,{className:"h-4 w-4"})})]})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)(C.l6,{value:E,onValueChange:F,children:[(0,l.jsx)(C.bq,{children:(0,l.jsx)(C.yv,{})}),(0,l.jsxs)(C.gC,{children:[(0,l.jsx)(C.eb,{value:"none",children:"シリーズなし"}),g.map(e=>(0,l.jsx)(C.eb,{value:e.id,children:e.name},e.id))]})]}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(_.p,{value:ea,onChange:e=>el(e.target.value),placeholder:"新しいシリーズ"}),(0,l.jsx)(u.$,{variant:"outline",onClick:()=>{ea.trim()&&z(async()=>{await (0,c.w)(ea),el(""),L.refresh()})},disabled:U,children:(0,l.jsx)(n.A,{className:"h-4 w-4"})})]})]})]}),(0,l.jsxs)(C.l6,{value:M,onValueChange:e=>B(e),children:[(0,l.jsx)(C.bq,{children:(0,l.jsx)(C.yv,{})}),(0,l.jsx)(C.gC,{children:Object.entries(k.Zt).map(e=>{let[r,a]=e;return(0,l.jsx)(C.eb,{value:r,children:a},r)})})]}),(0,l.jsxs)("div",{className:"space-y-2",children:[(0,l.jsxs)("div",{className:"text-xs text-muted-foreground",children:["評価: ",I.toFixed(1)]}),(0,l.jsx)(S.A,{min:0,max:5,step:.1,value:[I],onValueChange:e=>{var r;return O(null!=(r=e[0])?r:0)}})]}),(0,l.jsx)(_.p,{value:W,onChange:e=>J(e.target.value),placeholder:"サムネイルURL"}),(0,l.jsx)(_.p,{value:X,type:"date",onChange:e=>G(e.target.value)}),(0,l.jsx)(R.T,{value:Q,onChange:e=>Y(e.target.value),placeholder:"気になった理由"}),(0,l.jsx)(R.T,{value:D,onChange:e=>P(e.target.value),placeholder:"感想"}),(0,l.jsx)(_.p,{value:H,onChange:e=>K(e.target.value),placeholder:"タグ (カンマ区切り)"}),(0,l.jsx)(u.$,{className:"w-full",onClick:()=>{z(async()=>{await i({id:b.id,title:T,type_id:Z,series_id:"none"===E?null:E,status:M,rating:I,review_text:D||null,why_interested:Q||null,availability_end:X||null,thumbnail_url:W||null,tags:H.split(",").map(e=>e.trim()).filter(Boolean)}),A(!1),L.refresh()})},disabled:U,children:"保存"})]})]})]})}},6170:(e,r,a)=>{a.d(r,{p:()=>n});var l=a(5155),s=a(2115),t=a(5016);let n=s.forwardRef((e,r)=>{let{className:a,type:s,...n}=e;return(0,l.jsx)("input",{type:s,className:(0,t.cn)("flex h-10 w-full rounded-lg border border-input bg-muted/30 px-3 py-2 text-sm outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring/90 disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...n})});n.displayName="Input"},7001:(e,r,a)=>{a.d(r,{T:()=>n});var l=a(5155),s=a(2115),t=a(5016);let n=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,l.jsx)("textarea",{className:(0,t.cn)("min-h-[80px] w-full rounded-lg border border-input bg-muted/30 px-3 py-2 text-sm outline-none ring-offset-background placeholder:text-muted-foreground focus-visible:ring-2 focus-visible:ring-ring/90 disabled:cursor-not-allowed disabled:opacity-50",a),ref:r,...s})});n.displayName="Textarea"},7003:(e,r,a)=>{a.d(r,{$:()=>o});var l=a(5155),s=a(2115),t=a(2467),n=a(3101),d=a(5016);let i=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg border border-transparent text-sm font-semibold transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-[0_10px_20px_-14px_hsl(var(--primary))] hover:brightness-110",secondary:"border-border/70 bg-muted/70 text-foreground hover:bg-muted",outline:"border-border/80 bg-transparent hover:bg-accent hover:text-accent-foreground",ghost:"text-foreground/85 hover:bg-accent hover:text-accent-foreground",destructive:"bg-red-600 text-white hover:bg-red-500"},size:{default:"h-10 px-4 py-2",sm:"h-8 rounded-lg px-3",lg:"h-11 rounded-lg px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,r)=>{let{className:a,variant:s,size:n,asChild:o=!1,...c}=e,u=o?t.DX:"button";return(0,l.jsx)(u,{className:(0,d.cn)(i({variant:s,size:n,className:a})),ref:r,...c})});o.displayName="Button"},7060:(e,r,a)=>{a.d(r,{A:()=>d});var l=a(5155),s=a(2115),t=a(3026),n=a(5016);let d=s.forwardRef((e,r)=>{let{className:a,...s}=e;return(0,l.jsxs)(t.bL,{ref:r,className:(0,n.cn)("relative flex w-full touch-none select-none items-center",a),...s,children:[(0,l.jsx)(t.CC,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-muted",children:(0,l.jsx)(t.Q6,{className:"absolute h-full bg-primary"})}),(0,l.jsx)(t.zi,{className:"block h-4 w-4 rounded-full border border-primary bg-background shadow"})]})});d.displayName=t.bL.displayName},7507:(e,r,a)=>{a.d(r,{bq:()=>u,eb:()=>f,gC:()=>x,l6:()=>o,yv:()=>c});var l=a(5155),s=a(2115),t=a(6685),n=a(4033),d=a(5917),i=a(5016);let o=t.bL,c=t.WT,u=s.forwardRef((e,r)=>{let{className:a,children:s,...d}=e;return(0,l.jsxs)(t.l9,{ref:r,className:(0,i.cn)("flex h-10 w-full items-center justify-between rounded-lg border border-input bg-muted/30 px-3 py-2 text-sm outline-none ring-offset-background focus-visible:ring-2 focus-visible:ring-ring/90",a),...d,children:[s,(0,l.jsx)(t.In,{children:(0,l.jsx)(n.A,{className:"h-4 w-4 opacity-60"})})]})});u.displayName=t.l9.displayName;let x=s.forwardRef((e,r)=>{let{className:a,children:s,...n}=e;return(0,l.jsx)(t.ZL,{children:(0,l.jsx)(t.UC,{ref:r,className:(0,i.cn)("z-50 min-w-[8rem] overflow-hidden rounded-lg border border-border/80 bg-card/95 p-1 shadow-[0_18px_30px_-18px_hsl(220_30%_1%_/_0.95)]",a),...n,children:(0,l.jsx)(t.LM,{children:s})})})});x.displayName=t.UC.displayName;let f=s.forwardRef((e,r)=>{let{className:a,children:s,...n}=e;return(0,l.jsxs)(t.q7,{ref:r,className:(0,i.cn)("relative flex cursor-default select-none items-center rounded-md py-1.5 pl-8 pr-2 text-sm outline-none hover:bg-accent",a),...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(t.VF,{children:(0,l.jsx)(d.A,{className:"h-4 w-4"})})}),(0,l.jsx)(t.p4,{children:s})]})});f.displayName=t.q7.displayName},7812:(e,r,a)=>{a.d(r,{E:()=>d});var l=a(5155);a(2115);var s=a(3101),t=a(5016);let n=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground",secondary:"border-transparent bg-muted text-muted-foreground",danger:"border-transparent bg-red-600 text-white"}},defaultVariants:{variant:"default"}});function d(e){let{className:r,variant:a,...s}=e;return(0,l.jsx)("div",{className:(0,t.cn)(n({variant:a}),r),...s})}}}]);